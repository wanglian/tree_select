<%%# locals: name, value=Node.new, readonly=false, complete_must=false %>
<%% node = value.nil? ? <%= model_class_name %>.new : <%= model_class_name %>.find(value) %>
<%% readonly ||= false %>
<%% complete_must ||= false %>
<%% <%= model_class_name %>::CATEGORIES.each do |category| -%>
  <%%= render :partial => 'category', :object => category, 
             :locals => {:name => name, :options => node.subs(category), :readonly => readonly, :complete_must => complete_must}%>
  <%%# break if category == value.category %>
<%% end -%>
<%%= hidden_field_tag name, value %>